import{d as F,a7 as T,u as G,y as f,z as a,M as s,B as t,C as n,O as g,D as u,T as C,A as z,V as L,L as E,R as M,g as k,x as m,a2 as B,a3 as d,$ as R,a6 as b,a8 as O,a9 as S,U as P,I as W,N as y,k as j}from"./DG-Bmc7c.js";import{u as J}from"./Drcv-Wji.js";const K={class:"mb-5"},q={key:0,class:"text-center py-16 font-mono text-dim",style:{"letter-spacing":"2px"}},H={class:"d-flex align-center mb-6 pb-4",style:{"border-bottom":"1px solid var(--navy-border)"}},Q={class:"page-title"},X={class:"image-thumb"},Y=["src","alt"],Z={class:"img-caption"},h={class:"d-flex justify-end gap-3 mt-6"},se=F({__name:"[id]",setup(_){const U=T(),V=G(),{currentReport:c}=J(),D=j(()=>Number(U.params.id)),o=j(()=>{var i;return((i=c.value)==null?void 0:i.bevindingen.find(e=>e.id===D.value))??null}),$=["nvt","kritiek","hoog","gemiddeld","laag","informatief"],x=k(null),p=k(!1),v=k(!1);function A(){v.value=!0,V.push("/bevindingen")}function w(i){!i||!o.value||Array.from(i).forEach(e=>{const l=new FileReader;l.onload=r=>o.value.fotos.push({name:e.name,src:r.target.result}),l.readAsDataURL(e)})}function I(i){w(i.target.files),i.target.value=""}function N(i){var e;p.value=!1,w(((e=i.dataTransfer)==null?void 0:e.files)??null)}return(i,e)=>(m(),f("div",null,[a("div",K,[a("span",{class:"back-btn",onClick:e[0]||(e[0]=l=>s(V).push("/bevindingen"))},[t(g,{size:"14",class:"mr-1"},{default:n(()=>[...e[12]||(e[12]=[u("mdi-arrow-left",-1)])]),_:1}),e[13]||(e[13]=u("Terug naar bevindingen ",-1))])]),s(o)?(m(),f(C,{key:1},[a("div",H,[t(g,{color:"primary",class:"mr-3"},{default:n(()=>[...e[14]||(e[14]=[u("mdi-shield-alert",-1)])]),_:1}),a("span",Q,z(s(o).titel),1)]),t(L,{elevation:"0",style:{"border-top":"3px solid var(--orange) !important"},class:"pa-7"},{default:n(()=>[t(B,null,{default:n(()=>[t(d,{cols:"12",md:"6"},{default:n(()=>[e[15]||(e[15]=a("div",{class:"field-label mb-2"},"Severiteit",-1)),t(R,{modelValue:s(o).severiteit,"onUpdate:modelValue":e[1]||(e[1]=l=>s(o).severiteit=l),items:$,"hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:n(()=>[e[16]||(e[16]=a("div",{class:"field-label mb-2"},"Status",-1)),t(R,{modelValue:s(o).status,"onUpdate:modelValue":e[2]||(e[2]=l=>s(o).status=l),items:["open","dicht"],"hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",class:"mt-4"},{default:n(()=>[e[17]||(e[17]=a("div",{class:"field-label mb-2"},"Algemene Beschrijving",-1)),t(b,{modelValue:s(o).beschrijving,"onUpdate:modelValue":e[3]||(e[3]=l=>s(o).beschrijving=l),rows:"5",placeholder:"Beschrijf de bevinding: wat is het, hoe werkt het, hoe is het gevonden...","hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",class:"mt-4"},{default:n(()=>[e[18]||(e[18]=a("div",{class:"field-label mb-2"},"Reproduceerbare Stappen (voor de klant)",-1)),t(b,{modelValue:s(o).stappen,"onUpdate:modelValue":e[4]||(e[4]=l=>s(o).stappen=l),rows:"6",placeholder:`Stap 1: ...
Stap 2: ...
Stap 3: ...`,"hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6",class:"mt-4"},{default:n(()=>[e[19]||(e[19]=a("div",{class:"field-label mb-2"},"Risico voor de klant",-1)),t(b,{modelValue:s(o).risico,"onUpdate:modelValue":e[5]||(e[5]=l=>s(o).risico=l),rows:"4",placeholder:"Wat zijn de mogelijke gevolgen als dit niet wordt opgelost?","hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6",class:"mt-4"},{default:n(()=>[e[20]||(e[20]=a("div",{class:"field-label mb-2"},"Aanbeveling",-1)),t(b,{modelValue:s(o).aanbeveling,"onUpdate:modelValue":e[6]||(e[6]=l=>s(o).aanbeveling=l),rows:"4",placeholder:"Welke maatregelen worden aanbevolen?","hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",class:"mt-4"},{default:n(()=>[e[25]||(e[25]=a("div",{class:"section-title mb-4"},"Bewijs / Screenshots",-1)),a("div",{class:"upload-zone",onClick:e[7]||(e[7]=l=>{var r;return(r=s(x))==null?void 0:r.click()}),onDragover:e[8]||(e[8]=S(l=>p.value=!0,["prevent"])),onDragleave:e[9]||(e[9]=l=>p.value=!1),onDrop:S(N,["prevent"]),style:O(s(p)?"border-color:var(--orange);background:var(--orange-dim)":"")},[t(g,{color:"primary",size:"32"},{default:n(()=>[...e[21]||(e[21]=[u("mdi-cloud-upload",-1)])]),_:1}),e[22]||(e[22]=a("p",null,"Klik om afbeeldingen te uploaden of sleep ze hier naartoe",-1)),e[23]||(e[23]=a("p",{style:{"font-size":"10px"}},"PNG, JPG, GIF — meerdere bestanden mogelijk",-1))],36),a("input",{ref_key:"fileInput",ref:x,type:"file",multiple:"",accept:"image/*",style:{display:"none"},onChange:I},null,544),t(B,{class:"mt-3"},{default:n(()=>[(m(!0),f(C,null,P(s(o).fotos,(l,r)=>(m(),W(d,{key:r,cols:"6",sm:"4",md:"3",lg:"2"},{default:n(()=>[a("div",X,[t(y,{class:"remove-btn btn-danger",size:"x-small",icon:"",onClick:ee=>s(o).fotos.splice(r,1)},{default:n(()=>[t(g,{size:"12"},{default:n(()=>[...e[24]||(e[24]=[u("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"]),a("img",{src:l.src,alt:l.name},null,8,Y),a("div",Z,z(l.name),1)])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),a("div",h,[t(y,{class:"btn-outline-orange",onClick:e[10]||(e[10]=l=>s(V).push("/bevindingen"))},{default:n(()=>[...e[26]||(e[26]=[u("Annuleren",-1)])]),_:1}),t(y,{class:"btn-orange",onClick:A},{default:n(()=>[...e[27]||(e[27]=[u("Opslaan",-1)])]),_:1})])]),_:1})],64)):(m(),f("div",q," Bevinding niet gevonden. ")),t(M,{modelValue:s(v),"onUpdate:modelValue":e[11]||(e[11]=l=>E(v)?v.value=l:null),timeout:2500,location:"bottom right",color:"transparent",elevation:"0"},{default:n(()=>[...e[28]||(e[28]=[a("div",{style:{background:"var(--navy-mid)",border:"1px solid var(--orange)",color:"var(--orange)","font-family":"var(--font-mono)","font-size":"11px","letter-spacing":"2px",padding:"12px 20px"}}," ✓ Bevinding opgeslagen ",-1)])]),_:1},8,["modelValue"])]))}});export{se as default};
